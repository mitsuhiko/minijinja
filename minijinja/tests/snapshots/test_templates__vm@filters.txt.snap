---
source: minijinja/tests/test_templates.rs
expression: "&rendered"
input_file: minijinja/tests/inputs/filters.txt

---
lower: bird
upper: BIRD
replace: third
escape: &lt;
e: &lt;
double-escape: &lt;
safe: <
list-length: 3
map-length: 2
string-length: 4
string-count: 4
reverse-list: 3, 2, 1
reverse-string: driB
trim: |Spacebird|
trim-bird: ir
join-default: 123
join-pipe: 1|2|3
join_string: B-i-r-d
default: true
default-value: 42
d: true

=====

Template {
    name: "filters.txt",
    instructions: [
        00000 | EMIT_RAW (string "lower: ")   [filters.txt:1],
        00001 | LOOKUP (var "word")   [filters.txt:1],
        00002 | BUILD_LIST (0 items)   [filters.txt:1],
        00003 | APPLY_FILTER (name "lower")   [filters.txt:1],
        00004 | EMIT   [filters.txt:1],
        00005 | EMIT_RAW (string "\nupper: ")   [filters.txt:1],
        00006 | LOOKUP (var "word")   [filters.txt:2],
        00007 | BUILD_LIST (0 items)   [filters.txt:2],
        00008 | APPLY_FILTER (name "upper")   [filters.txt:2],
        00009 | EMIT   [filters.txt:2],
        0000a | EMIT_RAW (string "\nreplace: ")   [filters.txt:2],
        0000b | LOOKUP (var "word")   [filters.txt:3],
        0000c | LOAD_CONST (value "B")   [filters.txt:3],
        0000d | LOAD_CONST (value "th")   [filters.txt:3],
        0000e | BUILD_LIST (2 items)   [filters.txt:3],
        0000f | APPLY_FILTER (name "replace")   [filters.txt:3],
        00010 | EMIT   [filters.txt:3],
        00011 | EMIT_RAW (string "\nescape: ")   [filters.txt:3],
        00012 | LOAD_CONST (value "<")   [filters.txt:4],
        00013 | BUILD_LIST (0 items)   [filters.txt:4],
        00014 | APPLY_FILTER (name "escape")   [filters.txt:4],
        00015 | EMIT   [filters.txt:4],
        00016 | EMIT_RAW (string "\ne: ")   [filters.txt:4],
        00017 | LOAD_CONST (value "<")   [filters.txt:5],
        00018 | BUILD_LIST (0 items)   [filters.txt:5],
        00019 | APPLY_FILTER (name "e")   [filters.txt:5],
        0001a | EMIT   [filters.txt:5],
        0001b | EMIT_RAW (string "\ndouble-escape: ")   [filters.txt:5],
        0001c | LOAD_CONST (value "<")   [filters.txt:6],
        0001d | BUILD_LIST (0 items)   [filters.txt:6],
        0001e | APPLY_FILTER (name "escape")   [filters.txt:6],
        0001f | BUILD_LIST (0 items)   [filters.txt:6],
        00020 | APPLY_FILTER (name "escape")   [filters.txt:6],
        00021 | EMIT   [filters.txt:6],
        00022 | EMIT_RAW (string "\nsafe: ")   [filters.txt:6],
        00023 | LOAD_CONST (value "<")   [filters.txt:7],
        00024 | BUILD_LIST (0 items)   [filters.txt:7],
        00025 | APPLY_FILTER (name "safe")   [filters.txt:7],
        00026 | BUILD_LIST (0 items)   [filters.txt:7],
        00027 | APPLY_FILTER (name "escape")   [filters.txt:7],
        00028 | EMIT   [filters.txt:7],
        00029 | EMIT_RAW (string "\nlist-length: ")   [filters.txt:7],
        0002a | LOOKUP (var "list")   [filters.txt:8],
        0002b | BUILD_LIST (0 items)   [filters.txt:8],
        0002c | APPLY_FILTER (name "length")   [filters.txt:8],
        0002d | EMIT   [filters.txt:8],
        0002e | EMIT_RAW (string "\nmap-length: ")   [filters.txt:8],
        0002f | LOOKUP (var "map")   [filters.txt:9],
        00030 | BUILD_LIST (0 items)   [filters.txt:9],
        00031 | APPLY_FILTER (name "length")   [filters.txt:9],
        00032 | EMIT   [filters.txt:9],
        00033 | EMIT_RAW (string "\nstring-length: ")   [filters.txt:9],
        00034 | LOOKUP (var "word")   [filters.txt:10],
        00035 | BUILD_LIST (0 items)   [filters.txt:10],
        00036 | APPLY_FILTER (name "length")   [filters.txt:10],
        00037 | EMIT   [filters.txt:10],
        00038 | EMIT_RAW (string "\nstring-count: ")   [filters.txt:10],
        00039 | LOOKUP (var "word")   [filters.txt:11],
        0003a | BUILD_LIST (0 items)   [filters.txt:11],
        0003b | APPLY_FILTER (name "count")   [filters.txt:11],
        0003c | EMIT   [filters.txt:11],
        0003d | EMIT_RAW (string "\nreverse-list: ")   [filters.txt:11],
        0003e | LOOKUP (var "list")   [filters.txt:12],
        0003f | BUILD_LIST (0 items)   [filters.txt:12],
        00040 | APPLY_FILTER (name "reverse")   [filters.txt:12],
        00041 | EMIT   [filters.txt:12],
        00042 | EMIT_RAW (string "\nreverse-string: ")   [filters.txt:12],
        00043 | LOOKUP (var "word")   [filters.txt:13],
        00044 | BUILD_LIST (0 items)   [filters.txt:13],
        00045 | APPLY_FILTER (name "reverse")   [filters.txt:13],
        00046 | EMIT   [filters.txt:13],
        00047 | EMIT_RAW (string "\ntrim: |")   [filters.txt:13],
        00048 | LOOKUP (var "word_with_spaces")   [filters.txt:14],
        00049 | BUILD_LIST (0 items)   [filters.txt:14],
        0004a | APPLY_FILTER (name "trim")   [filters.txt:14],
        0004b | EMIT   [filters.txt:14],
        0004c | EMIT_RAW (string "|\ntrim-bird: ")   [filters.txt:14],
        0004d | LOOKUP (var "word")   [filters.txt:15],
        0004e | LOAD_CONST (value "Bd")   [filters.txt:15],
        0004f | BUILD_LIST (1 items)   [filters.txt:15],
        00050 | APPLY_FILTER (name "trim")   [filters.txt:15],
        00051 | EMIT   [filters.txt:15],
        00052 | EMIT_RAW (string "\njoin-default: ")   [filters.txt:15],
        00053 | LOOKUP (var "list")   [filters.txt:16],
        00054 | BUILD_LIST (0 items)   [filters.txt:16],
        00055 | APPLY_FILTER (name "join")   [filters.txt:16],
        00056 | EMIT   [filters.txt:16],
        00057 | EMIT_RAW (string "\njoin-pipe: ")   [filters.txt:16],
        00058 | LOOKUP (var "list")   [filters.txt:17],
        00059 | LOAD_CONST (value "|")   [filters.txt:17],
        0005a | BUILD_LIST (1 items)   [filters.txt:17],
        0005b | APPLY_FILTER (name "join")   [filters.txt:17],
        0005c | EMIT   [filters.txt:17],
        0005d | EMIT_RAW (string "\njoin_string: ")   [filters.txt:17],
        0005e | LOOKUP (var "word")   [filters.txt:18],
        0005f | LOAD_CONST (value "-")   [filters.txt:18],
        00060 | BUILD_LIST (1 items)   [filters.txt:18],
        00061 | APPLY_FILTER (name "join")   [filters.txt:18],
        00062 | EMIT   [filters.txt:18],
        00063 | EMIT_RAW (string "\ndefault: ")   [filters.txt:18],
        00064 | LOOKUP (var "undefined")   [filters.txt:19],
        00065 | BUILD_LIST (0 items)   [filters.txt:19],
        00066 | APPLY_FILTER (name "default")   [filters.txt:19],
        00067 | LOAD_CONST (value "")   [filters.txt:19],
        00068 | EQ   [filters.txt:19],
        00069 | EMIT   [filters.txt:19],
        0006a | EMIT_RAW (string "\ndefault-value: ")   [filters.txt:19],
        0006b | LOOKUP (var "undefined")   [filters.txt:20],
        0006c | LOAD_CONST (value 42)   [filters.txt:20],
        0006d | BUILD_LIST (1 items)   [filters.txt:20],
        0006e | APPLY_FILTER (name "default")   [filters.txt:20],
        0006f | EMIT   [filters.txt:20],
        00070 | EMIT_RAW (string "\nd: ")   [filters.txt:20],
        00071 | LOOKUP (var "undefined")   [filters.txt:21],
        00072 | BUILD_LIST (0 items)   [filters.txt:21],
        00073 | APPLY_FILTER (name "d")   [filters.txt:21],
        00074 | LOAD_CONST (value "")   [filters.txt:21],
        00075 | EQ   [filters.txt:21],
        00076 | EMIT   [filters.txt:21],
        00077 | EMIT_RAW (string "\n")   [filters.txt:21],
    ],
    blocks: {},
    initial_auto_escape: None,
}
