---
source: minijinja/tests/test_templates.rs
expression: "&rendered"
input_file: minijinja/tests/inputs/filters.txt

---
lower: bird
upper: BIRD
replace: third
escape: &lt;
e: &lt;
double-escape: &lt;
safe: <
list-length: 3
list-from-list: [1, 2, 3]
list-from-map: ["a", "c"]
list-from-word: ['B', 'i', 'r', 'd']
list-from-undefined: []
map-length: 2
string-length: 4
string-count: 4
reverse-list: [3, 2, 1]
reverse-string: driB
trim: |Spacebird|
trim-bird: ir
join-default: 123
join-pipe: 1|2|3
join_string: B-i-r-d
default: true
default-value: 42
d: true
json: {"a":"b","c":"d"}
json-pretty: {
  "a": "b",
  "c": "d"
}
json-scary-html: "\u003c\u003e\u0026\u0027"
urlencode: hello%20world/baz
urlencode-kv: a=x%20y&b=2&c=3
batch: [[0, 1, 2], [3, 4, 5], [6, 7, 8], [9]]
batch-fill: [[0, 1, 2], [3, 4, 5], [6, 7, 8], [9, "-", "-"]]
slice: [[0, 1, 2, 3], [4, 5, 6], [7, 8, 9]]
slice-fill: [[0, 1, 2, 3], [4, 5, 6, "-"], [7, 8, 9, "-"]]
=====

Template {
    name: "filters.txt",
    instructions: [
        00000 | EMIT_RAW (string "lower: ")  [line 1],
        00001 | LOOKUP (var "word"),
        00002 | BUILD_LIST (0 items),
        00003 | APPLY_FILTER (name "lower"),
        00004 | EMIT,
        00005 | EMIT_RAW (string "\nupper: "),
        00006 | LOOKUP (var "word")  [line 2],
        00007 | BUILD_LIST (0 items),
        00008 | APPLY_FILTER (name "upper"),
        00009 | EMIT,
        0000a | EMIT_RAW (string "\nreplace: "),
        0000b | LOOKUP (var "word")  [line 3],
        0000c | LOAD_CONST (value "B"),
        0000d | LOAD_CONST (value "th"),
        0000e | BUILD_LIST (2 items),
        0000f | APPLY_FILTER (name "replace"),
        00010 | EMIT,
        00011 | EMIT_RAW (string "\nescape: "),
        00012 | LOAD_CONST (value "<")  [line 4],
        00013 | BUILD_LIST (0 items),
        00014 | APPLY_FILTER (name "escape"),
        00015 | EMIT,
        00016 | EMIT_RAW (string "\ne: "),
        00017 | LOAD_CONST (value "<")  [line 5],
        00018 | BUILD_LIST (0 items),
        00019 | APPLY_FILTER (name "e"),
        0001a | EMIT,
        0001b | EMIT_RAW (string "\ndouble-escape: "),
        0001c | LOAD_CONST (value "<")  [line 6],
        0001d | BUILD_LIST (0 items),
        0001e | APPLY_FILTER (name "escape"),
        0001f | BUILD_LIST (0 items),
        00020 | APPLY_FILTER (name "escape"),
        00021 | EMIT,
        00022 | EMIT_RAW (string "\nsafe: "),
        00023 | LOAD_CONST (value "<")  [line 7],
        00024 | BUILD_LIST (0 items),
        00025 | APPLY_FILTER (name "safe"),
        00026 | BUILD_LIST (0 items),
        00027 | APPLY_FILTER (name "escape"),
        00028 | EMIT,
        00029 | EMIT_RAW (string "\nlist-length: "),
        0002a | LOOKUP (var "list")  [line 8],
        0002b | BUILD_LIST (0 items),
        0002c | APPLY_FILTER (name "length"),
        0002d | EMIT,
        0002e | EMIT_RAW (string "\nlist-from-list: "),
        0002f | LOOKUP (var "list")  [line 9],
        00030 | BUILD_LIST (0 items),
        00031 | APPLY_FILTER (name "list"),
        00032 | EMIT,
        00033 | EMIT_RAW (string "\nlist-from-map: "),
        00034 | LOOKUP (var "map")  [line 10],
        00035 | BUILD_LIST (0 items),
        00036 | APPLY_FILTER (name "list"),
        00037 | EMIT,
        00038 | EMIT_RAW (string "\nlist-from-word: "),
        00039 | LOOKUP (var "word")  [line 11],
        0003a | BUILD_LIST (0 items),
        0003b | APPLY_FILTER (name "list"),
        0003c | EMIT,
        0003d | EMIT_RAW (string "\nlist-from-undefined: "),
        0003e | LOOKUP (var "undefined")  [line 12],
        0003f | BUILD_LIST (0 items),
        00040 | APPLY_FILTER (name "list"),
        00041 | EMIT,
        00042 | EMIT_RAW (string "\nmap-length: "),
        00043 | LOOKUP (var "map")  [line 13],
        00044 | BUILD_LIST (0 items),
        00045 | APPLY_FILTER (name "length"),
        00046 | EMIT,
        00047 | EMIT_RAW (string "\nstring-length: "),
        00048 | LOOKUP (var "word")  [line 14],
        00049 | BUILD_LIST (0 items),
        0004a | APPLY_FILTER (name "length"),
        0004b | EMIT,
        0004c | EMIT_RAW (string "\nstring-count: "),
        0004d | LOOKUP (var "word")  [line 15],
        0004e | BUILD_LIST (0 items),
        0004f | APPLY_FILTER (name "count"),
        00050 | EMIT,
        00051 | EMIT_RAW (string "\nreverse-list: "),
        00052 | LOOKUP (var "list")  [line 16],
        00053 | BUILD_LIST (0 items),
        00054 | APPLY_FILTER (name "reverse"),
        00055 | EMIT,
        00056 | EMIT_RAW (string "\nreverse-string: "),
        00057 | LOOKUP (var "word")  [line 17],
        00058 | BUILD_LIST (0 items),
        00059 | APPLY_FILTER (name "reverse"),
        0005a | EMIT,
        0005b | EMIT_RAW (string "\ntrim: |"),
        0005c | LOOKUP (var "word_with_spaces")  [line 18],
        0005d | BUILD_LIST (0 items),
        0005e | APPLY_FILTER (name "trim"),
        0005f | EMIT,
        00060 | EMIT_RAW (string "|\ntrim-bird: "),
        00061 | LOOKUP (var "word")  [line 19],
        00062 | LOAD_CONST (value "Bd"),
        00063 | BUILD_LIST (1 items),
        00064 | APPLY_FILTER (name "trim"),
        00065 | EMIT,
        00066 | EMIT_RAW (string "\njoin-default: "),
        00067 | LOOKUP (var "list")  [line 20],
        00068 | BUILD_LIST (0 items),
        00069 | APPLY_FILTER (name "join"),
        0006a | EMIT,
        0006b | EMIT_RAW (string "\njoin-pipe: "),
        0006c | LOOKUP (var "list")  [line 21],
        0006d | LOAD_CONST (value "|"),
        0006e | BUILD_LIST (1 items),
        0006f | APPLY_FILTER (name "join"),
        00070 | EMIT,
        00071 | EMIT_RAW (string "\njoin_string: "),
        00072 | LOOKUP (var "word")  [line 22],
        00073 | LOAD_CONST (value "-"),
        00074 | BUILD_LIST (1 items),
        00075 | APPLY_FILTER (name "join"),
        00076 | EMIT,
        00077 | EMIT_RAW (string "\ndefault: "),
        00078 | LOOKUP (var "undefined")  [line 23],
        00079 | BUILD_LIST (0 items),
        0007a | APPLY_FILTER (name "default"),
        0007b | LOAD_CONST (value ""),
        0007c | EQ,
        0007d | EMIT,
        0007e | EMIT_RAW (string "\ndefault-value: "),
        0007f | LOOKUP (var "undefined")  [line 24],
        00080 | LOAD_CONST (value 42),
        00081 | BUILD_LIST (1 items),
        00082 | APPLY_FILTER (name "default"),
        00083 | EMIT,
        00084 | EMIT_RAW (string "\nd: "),
        00085 | LOOKUP (var "undefined")  [line 25],
        00086 | BUILD_LIST (0 items),
        00087 | APPLY_FILTER (name "d"),
        00088 | LOAD_CONST (value ""),
        00089 | EQ,
        0008a | EMIT,
        0008b | EMIT_RAW (string "\njson: "),
        0008c | LOOKUP (var "map")  [line 26],
        0008d | BUILD_LIST (0 items),
        0008e | APPLY_FILTER (name "tojson"),
        0008f | EMIT,
        00090 | EMIT_RAW (string "\njson-pretty: "),
        00091 | LOOKUP (var "map")  [line 27],
        00092 | LOAD_CONST (value true),
        00093 | BUILD_LIST (1 items),
        00094 | APPLY_FILTER (name "tojson"),
        00095 | EMIT,
        00096 | EMIT_RAW (string "\njson-scary-html: "),
        00097 | LOOKUP (var "scary_html")  [line 28],
        00098 | BUILD_LIST (0 items),
        00099 | APPLY_FILTER (name "tojson"),
        0009a | EMIT,
        0009b | EMIT_RAW (string "\nurlencode: "),
        0009c | LOAD_CONST (value "hello world/baz")  [line 29],
        0009d | BUILD_LIST (0 items),
        0009e | APPLY_FILTER (name "urlencode"),
        0009f | EMIT,
        000a0 | EMIT_RAW (string "\nurlencode-kv: "),
        000a1 | LOAD_CONST (value "a")  [line 30],
        000a2 | LOAD_CONST (value "x y"),
        000a3 | LOAD_CONST (value "b"),
        000a4 | LOAD_CONST (value 2),
        000a5 | LOAD_CONST (value "c"),
        000a6 | LOAD_CONST (value 3),
        000a7 | BUILD_MAP (3 pairs),
        000a8 | BUILD_LIST (1 items),
        000a9 | CALL_FUNCTION (name "dict"),
        000aa | BUILD_LIST (0 items),
        000ab | APPLY_FILTER (name "urlencode"),
        000ac | EMIT,
        000ad | EMIT_RAW (string "\nbatch: "),
        000ae | LOAD_CONST (value 10)  [line 31],
        000af | BUILD_LIST (1 items),
        000b0 | CALL_FUNCTION (name "range"),
        000b1 | LOAD_CONST (value 3),
        000b2 | BUILD_LIST (1 items),
        000b3 | APPLY_FILTER (name "batch"),
        000b4 | EMIT,
        000b5 | EMIT_RAW (string "\nbatch-fill: "),
        000b6 | LOAD_CONST (value 10)  [line 32],
        000b7 | BUILD_LIST (1 items),
        000b8 | CALL_FUNCTION (name "range"),
        000b9 | LOAD_CONST (value 3),
        000ba | LOAD_CONST (value "-"),
        000bb | BUILD_LIST (2 items),
        000bc | APPLY_FILTER (name "batch"),
        000bd | EMIT,
        000be | EMIT_RAW (string "\nslice: "),
        000bf | LOAD_CONST (value 10)  [line 33],
        000c0 | BUILD_LIST (1 items),
        000c1 | CALL_FUNCTION (name "range"),
        000c2 | LOAD_CONST (value 3),
        000c3 | BUILD_LIST (1 items),
        000c4 | APPLY_FILTER (name "slice"),
        000c5 | EMIT,
        000c6 | EMIT_RAW (string "\nslice-fill: "),
        000c7 | LOAD_CONST (value 10)  [line 34],
        000c8 | BUILD_LIST (1 items),
        000c9 | CALL_FUNCTION (name "range"),
        000ca | LOAD_CONST (value 3),
        000cb | LOAD_CONST (value "-"),
        000cc | BUILD_LIST (2 items),
        000cd | APPLY_FILTER (name "slice"),
        000ce | EMIT,
    ],
    blocks: {},
    initial_auto_escape: None,
}
